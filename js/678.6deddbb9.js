"use strict";(self["webpackChunkntpu_dorm_check_in"]=self["webpackChunkntpu_dorm_check_in"]||[]).push([[678],{9678:function(t,e,i){i.r(e),i.d(e,{default:function(){return Z}});var r=i(7179),s=i(3058),a=i(4437),n=i(6035),o=(i(7658),i(4987)),l=i(4609),u=i(380),d=(0,o.Z)(l.Z,(0,u.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(r=>{r&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))})):i.valid=e(t),i},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const i=this.watchers.find((t=>t._uid===e._uid));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}}),h=i(6275),c=i(5294),f=i(1800),p=function(){var t=this,e=t._self._c;return e(s.Z,{attrs:{elevation:"0"}},[e(n.Z,{attrs:{fluid:""}},[e(c.Z,[e(a.Z,{attrs:{cols:"12"}},[e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.formShow,expression:"formShow"}]},[e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("h3",[t._v("請登入學生資訊系統帳號")])]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("h5",{staticStyle:{color:"gray"}},[t._v(" Login with your student information system account. ")])]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e(d,{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(f.Z,{attrs:{rules:t.stuidRules,label:"學號 / Student ID",type:"number",required:""},model:{value:t.stuid,callback:function(e){t.stuid=e},expression:"stuid"}}),e(f.Z,{attrs:{rules:t.pwdRules,label:"密碼 / Password",type:"password",required:""},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),e(r.Z,{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"#87C1A2"},on:{click:t.validate}},[t._v("登入 / Login")])],1)],1),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.formLoadingShow,expression:"formLoadingShow"}]},[e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e(h.Z,{attrs:{indeterminate:"",color:"amber"}})],1)],1),e("br"),e(c.Z,{staticStyle:{"background-color":"#17252a",color:"white",zoom:"1.3"},attrs:{align:"center",justify:"center",length:""}},[t._v(" "+t._s(t.tipsText)+" ")])],1)],1)],1)],1)},m=[];const g=i(9669);var v=i(1181),w={name:"Home",data(){return{valid:!1,stuid:"",stuidRules:[t=>!!t||"請輸入學號",t=>t&&9===t.length||"請輸入學號正確格式"],pwd:"",pwdRules:[t=>!!t||"請輸入密碼"],formShow:!0,formLoadingShow:!1,tipsText:""}},components:{},methods:{validate(){if(this.$refs.form.validate()){this.formShow=!1,this.formLoadingShow=!0,this.tipsText="";let t=this;g.post(v.apiurl+"/login",{stu_id:this.stuid,pwd:this.pwd}).then((function(e){console.log(e.data),200!==e.data.code?(t.formShow=!0,t.formLoadingShow=!1,t.tipsText=e.data.message):(t.$cookie.set("token",e.data.session,1),t.$router.push("/reserve"),location.reload())})).catch((function(t){alert(t)}))}}},mounted:function(){this.$cookie.get("token")&&this.$router.push("/reserve")}},_=w,y=i(1001),b=(0,y.Z)(_,p,m,!1,null,null,null),Z=b.exports}}]);
//# sourceMappingURL=678.6deddbb9.js.map