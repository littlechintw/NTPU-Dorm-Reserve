"use strict";(self["webpackChunkntpu_dorm_check_in"]=self["webpackChunkntpu_dorm_check_in"]||[]).push([[53],{8307:function(t,e,i){i.r(e),i.d(e,{default:function(){return j}});var s=i(7179),n=i(3058),r=i(4437),l=i(6035),o=(i(7658),i(4987)),a=i(4609),h=i(380),u=(0,o.Z)(a.Z,(0,h.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))})):i.valid=e(t),i},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const i=this.watchers.find((t=>t._uid===e._uid));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}}),d=i(6275),c=i(5294),p=(i(541),i(3316)),f=i(3276),g=(0,o.Z)(f.Z).extend({name:"v-counter",functional:!0,props:{value:{type:[Number,String],default:""},max:[Number,String]},render(t,e){const{props:i}=e,s=parseInt(i.max,10),n=parseInt(i.value,10),r=s?`${n} / ${s}`:String(i.value),l=s&&n>s;return t("div",{staticClass:"v-counter",class:{"error--text":l,...(0,f.X)(e)}},r)}}),v=g,m=i(4654),b=i(1558),y=i(6596),$=i(144);function x(t){return $.ZP.extend({name:"intersectable",data:()=>({isIntersecting:!1}),mounted(){b.Z.inserted(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},destroyed(){b.Z.unbind(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},methods:{onObserve(e,i,s){if(this.isIntersecting=s,s)for(let n=0,r=t.onVisible.length;n<r;n++){const e=this[t.onVisible[n]];"function"!==typeof e?(0,y.Kd)(t.onVisible[n]+" method is not available on the instance but referenced in intersectable mixin options"):e()}}}})}var w=i(4204),S=i(4777),V=i(9495),k=i(3176),I=i(6044),Z=i(1050);const _=(0,o.Z)(p.Z,x({onVisible:["onResize","tryAutofocus"]}),w.Z),B=["color","file","time","date","datetime-local","week","month"];var L=_.extend().extend({name:"v-text-field",directives:{resize:V.Z,ripple:k.Z},inheritAttrs:!1,props:{appendOuterIcon:String,autofocus:Boolean,clearable:Boolean,clearIcon:{type:String,default:"$clear"},counter:[Boolean,Number,String],counterValue:Function,filled:Boolean,flat:Boolean,fullWidth:Boolean,label:String,outlined:Boolean,placeholder:String,prefix:String,prependInnerIcon:String,persistentPlaceholder:Boolean,reverse:Boolean,rounded:Boolean,shaped:Boolean,singleLine:Boolean,solo:Boolean,soloInverted:Boolean,suffix:String,type:{type:String,default:"text"}},data:()=>({badInput:!1,labelWidth:0,prefixWidth:0,prependWidth:0,initialValue:null,isBooted:!1,isClearing:!1}),computed:{classes(){return{...p.Z.options.computed.classes.call(this),"v-text-field":!0,"v-text-field--full-width":this.fullWidth,"v-text-field--prefix":this.prefix,"v-text-field--single-line":this.isSingle,"v-text-field--solo":this.isSolo,"v-text-field--solo-inverted":this.soloInverted,"v-text-field--solo-flat":this.flat,"v-text-field--filled":this.filled,"v-text-field--is-booted":this.isBooted,"v-text-field--enclosed":this.isEnclosed,"v-text-field--reverse":this.reverse,"v-text-field--outlined":this.outlined,"v-text-field--placeholder":this.placeholder,"v-text-field--rounded":this.rounded,"v-text-field--shaped":this.shaped}},computedColor(){const t=S.Z.options.computed.computedColor.call(this);return this.soloInverted&&this.isFocused?this.color||"primary":t},computedCounterValue(){return"function"===typeof this.counterValue?this.counterValue(this.internalValue):[...(this.internalValue||"").toString()].length},hasCounter(){return!1!==this.counter&&null!=this.counter},hasDetails(){return p.Z.options.computed.hasDetails.call(this)||this.hasCounter},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("input",this.lazyValue)}},isDirty(){var t;return(null===(t=this.lazyValue)||void 0===t?void 0:t.toString().length)>0||this.badInput},isEnclosed(){return this.filled||this.isSolo||this.outlined},isLabelActive(){return this.isDirty||B.includes(this.type)},isSingle(){return this.isSolo||this.singleLine||this.fullWidth||this.filled&&!this.hasLabel},isSolo(){return this.solo||this.soloInverted},labelPosition(){let t=this.prefix&&!this.labelValue?this.prefixWidth:0;return this.labelValue&&this.prependWidth&&(t-=this.prependWidth),this.$vuetify.rtl===this.reverse?{left:t,right:"auto"}:{left:"auto",right:t}},showLabel(){return this.hasLabel&&!(this.isSingle&&this.labelValue)},labelValue(){return this.isFocused||this.isLabelActive||this.persistentPlaceholder}},watch:{outlined:"setLabelWidth",label(){this.$nextTick(this.setLabelWidth)},prefix(){this.$nextTick(this.setPrefixWidth)},isFocused:"updateValue",value(t){this.lazyValue=t}},created(){this.$attrs.hasOwnProperty("box")&&(0,y.fK)("box","filled",this),this.$attrs.hasOwnProperty("browser-autocomplete")&&(0,y.fK)("browser-autocomplete","autocomplete",this),this.shaped&&!(this.filled||this.outlined||this.isSolo)&&(0,y.Kd)("shaped should be used with either filled or outlined",this)},mounted(){this.$watch((()=>this.labelValue),this.setLabelWidth),this.autofocus&&this.tryAutofocus(),requestAnimationFrame((()=>{this.isBooted=!0,requestAnimationFrame((()=>{this.isIntersecting||this.onResize()}))}))},methods:{focus(){this.onFocus()},blur(t){window.requestAnimationFrame((()=>{this.$refs.input&&this.$refs.input.blur()}))},clearableCallback(){this.$refs.input&&this.$refs.input.focus(),this.$nextTick((()=>this.internalValue=null))},genAppendSlot(){const t=[];return this.$slots["append-outer"]?t.push(this.$slots["append-outer"]):this.appendOuterIcon&&t.push(this.genIcon("appendOuter")),this.genSlot("append","outer",t)},genPrependInnerSlot(){const t=[];return this.$slots["prepend-inner"]?t.push(this.$slots["prepend-inner"]):this.prependInnerIcon&&t.push(this.genIcon("prependInner")),this.genSlot("prepend","inner",t)},genIconSlot(){const t=[];return this.$slots.append?t.push(this.$slots.append):this.appendIcon&&t.push(this.genIcon("append")),this.genSlot("append","inner",t)},genInputSlot(){const t=p.Z.options.methods.genInputSlot.call(this),e=this.genPrependInnerSlot();return e&&(t.children=t.children||[],t.children.unshift(e)),t},genClearIcon(){return this.clearable?this.isDirty?this.genSlot("append","inner",[this.genIcon("clear",this.clearableCallback)]):this.genSlot("append","inner",[this.$createElement("div")]):null},genCounter(){var t,e,i;if(!this.hasCounter)return null;const s=!0===this.counter?this.attrs$.maxlength:this.counter,n={dark:this.dark,light:this.light,max:s,value:this.computedCounterValue};return null!==(i=null===(e=(t=this.$scopedSlots).counter)||void 0===e?void 0:e.call(t,{props:n}))&&void 0!==i?i:this.$createElement(v,{props:n})},genControl(){return p.Z.options.methods.genControl.call(this)},genDefaultSlot(){return[this.genFieldset(),this.genTextFieldSlot(),this.genClearIcon(),this.genIconSlot(),this.genProgress()]},genFieldset(){return this.outlined?this.$createElement("fieldset",{attrs:{"aria-hidden":!0}},[this.genLegend()]):null},genLabel(){if(!this.showLabel)return null;const t={props:{absolute:!0,color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:!this.isSingle&&(this.isFocused||!!this.validationState),for:this.computedId,left:this.labelPosition.left,light:this.light,right:this.labelPosition.right,value:this.labelValue}};return this.$createElement(m.Z,t,this.$slots.label||this.label)},genLegend(){const t=this.singleLine||!this.labelValue&&!this.isDirty?0:this.labelWidth,e=this.$createElement("span",{domProps:{innerHTML:"&#8203;"},staticClass:"notranslate"});return this.$createElement("legend",{style:{width:this.isSingle?void 0:(0,Z.kb)(t)}},[e])},genInput(){const t=Object.assign({},this.listeners$);delete t.change;const{title:e,...i}=this.attrs$;return this.$createElement("input",{style:{},domProps:{value:"number"===this.type&&Object.is(this.lazyValue,-0)?"-0":this.lazyValue},attrs:{...i,autofocus:this.autofocus,disabled:this.isDisabled,id:this.computedId,placeholder:this.persistentPlaceholder||this.isFocused||!this.hasLabel?this.placeholder:void 0,readonly:this.isReadonly,type:this.type},on:Object.assign(t,{blur:this.onBlur,input:this.onInput,focus:this.onFocus,keydown:this.onKeyDown}),ref:"input",directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]})},genMessages(){if(!this.showDetails)return null;const t=p.Z.options.methods.genMessages.call(this),e=this.genCounter();return this.$createElement("div",{staticClass:"v-text-field__details"},[t,e])},genTextFieldSlot(){return this.$createElement("div",{staticClass:"v-text-field__slot"},[this.genLabel(),this.prefix?this.genAffix("prefix"):null,this.genInput(),this.suffix?this.genAffix("suffix"):null])},genAffix(t){return this.$createElement("div",{class:`v-text-field__${t}`,ref:t},this[t])},onBlur(t){this.isFocused=!1,t&&this.$nextTick((()=>this.$emit("blur",t)))},onClick(){this.isFocused||this.isDisabled||!this.$refs.input||this.$refs.input.focus()},onFocus(t){if(!this.$refs.input)return;const e=(0,I.e)(this.$el);return e?e.activeElement!==this.$refs.input?this.$refs.input.focus():void(this.isFocused||(this.isFocused=!0,t&&this.$emit("focus",t))):void 0},onInput(t){const e=t.target;this.internalValue=e.value,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){t.keyCode===Z.Do.enter&&this.lazyValue!==this.initialValue&&(this.initialValue=this.lazyValue,this.$emit("change",this.initialValue)),this.$emit("keydown",t)},onMouseDown(t){t.target!==this.$refs.input&&(t.preventDefault(),t.stopPropagation()),p.Z.options.methods.onMouseDown.call(this,t)},onMouseUp(t){this.hasMouseDown&&this.focus(),p.Z.options.methods.onMouseUp.call(this,t)},setLabelWidth(){this.outlined&&(this.labelWidth=this.$refs.label?Math.min(.75*this.$refs.label.scrollWidth+6,this.$el.offsetWidth-24):0)},setPrefixWidth(){this.$refs.prefix&&(this.prefixWidth=this.$refs.prefix.offsetWidth)},setPrependWidth(){this.outlined&&this.$refs["prepend-inner"]&&(this.prependWidth=this.$refs["prepend-inner"].offsetWidth)},tryAutofocus(){if(!this.autofocus||"undefined"===typeof document||!this.$refs.input)return!1;const t=(0,I.e)(this.$el);return!(!t||t.activeElement===this.$refs.input)&&(this.$refs.input.focus(),!0)},updateValue(t){this.hasColor=t,t?this.initialValue=this.lazyValue:this.initialValue!==this.lazyValue&&this.$emit("change",this.lazyValue)},onResize(){this.setLabelWidth(),this.setPrefixWidth(),this.setPrependWidth()}}}),C=function(){var t=this,e=t._self._c;return e(n.Z,{attrs:{elevation:"0"}},[e(l.Z,{attrs:{fluid:""}},[e(c.Z,[e(r.Z,{attrs:{cols:"12"}},[e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("h1",{staticStyle:{color:"red"}},[t._v(t._s(t.errValue))])]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.formShow,expression:"formShow"}]},[e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("h3",[t._v("請登入學生資訊系統帳號")])]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("h5",{staticStyle:{color:"gray"}},[t._v(" Login with your student information system account. ")])]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e(u,{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(L,{attrs:{rules:t.stuidRules,label:"學號 / Student ID",type:"number",required:""},model:{value:t.stuid,callback:function(e){t.stuid=e},expression:"stuid"}}),e(L,{attrs:{rules:t.pwdRules,label:"密碼 / Password",type:"password",required:""},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),e(s.Z,{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"#87C1A2"},on:{click:t.validate}},[t._v("登入 / Login")])],1)],1),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.formLoadingShow,expression:"formLoadingShow"}]},[e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e("br")]),e(c.Z,{attrs:{align:"center",justify:"center",length:""}},[e(d.Z,{attrs:{indeterminate:"",color:"amber"}})],1)],1),e("br"),e(c.Z,{staticStyle:{"background-color":"#17252a",color:"white",zoom:"1.3"},attrs:{align:"center",justify:"center",length:""}},[t._v(" "+t._s(t.tipsText)+" ")])],1)],1)],1)],1)},W=[];i(6229),i(7330),i(2062);const z=i(9669);var P=i(1181),E={name:"Home",data(){return{valid:!1,stuid:"",stuidRules:[t=>!!t||"請輸入學號",t=>t&&9===t.length||"請輸入學號正確格式"],pwd:"",pwdRules:[t=>!!t||"請輸入密碼"],formShow:!0,formLoadingShow:!1,tipsText:"",errValue:"",tokenValue:""}},components:{},methods:{validate(){if(this.$refs.form.validate()){this.formShow=!1,this.formLoadingShow=!0,this.tipsText="";let t=this;z.post(P.apiurl+"/login",{stu_id:this.stuid,pwd:this.pwd}).then((function(e){console.log(e.data),200!==e.data.code?(t.formShow=!0,t.formLoadingShow=!1,t.tipsText=e.data.message):(t.$cookie.set("token",e.data.session,1),t.$router.push("/reserve"),location.reload())})).catch((function(t){alert(t)}))}},loginWithGoogle(){this.$cookie.set("token",this.tokenValue,1),this.$router.push("/reserve")}},mounted:function(){this.$cookie.get("token")&&this.$router.push("/reserve");const t=new URLSearchParams(window.location.search);t.has("err")&&(this.errValue=t.get("err")),t.has("token")&&(this.tokenValue=t.get("token"),this.loginWithGoogle())}},D=E,F=i(1001),A=(0,F.Z)(D,C,W,!1,null,null,null),j=A.exports},648:function(t,e,i){var s=i(1694),n=i(614),r=i(4326),l=i(5112),o=l("toStringTag"),a=Object,h="Arguments"===r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(i){}};t.exports=s?r:function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=u(e=a(t),o))?i:h?r(e):"Object"===(s=r(e))&&n(e.callee)?"Arguments":s}},7045:function(t,e,i){var s=i(6339),n=i(3070);t.exports=function(t,e,i){return i.get&&s(i.get,e,{getter:!0}),i.set&&s(i.set,e,{setter:!0}),n.f(t,e,i)}},1694:function(t,e,i){var s=i(5112),n=s("toStringTag"),r={};r[n]="z",t.exports="[object z]"===String(r)},1340:function(t,e,i){var s=i(648),n=String;t.exports=function(t){if("Symbol"===s(t))throw TypeError("Cannot convert a Symbol value to a string");return n(t)}},8053:function(t){var e=TypeError;t.exports=function(t,i){if(t<i)throw e("Not enough arguments");return t}},6229:function(t,e,i){var s=i(8052),n=i(1702),r=i(1340),l=i(8053),o=URLSearchParams,a=o.prototype,h=n(a.append),u=n(a["delete"]),d=n(a.forEach),c=n([].push),p=new o("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&s(a,"delete",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return u(this,t);var s=[];d(this,(function(t,e){c(s,{key:e,value:t})})),l(e,1);var n,o=r(t),a=r(i),p=0,f=0,g=!1,v=s.length;while(p<v)n=s[p++],g||n.key===o?(g=!0,u(this,n.key)):f++;while(f<v)n=s[f++],n.key===o&&n.value===a||h(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},7330:function(t,e,i){var s=i(8052),n=i(1702),r=i(1340),l=i(8053),o=URLSearchParams,a=o.prototype,h=n(a.getAll),u=n(a.has),d=new o("a=1");!d.has("a",2)&&d.has("a",void 0)||s(a,"has",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return u(this,t);var s=h(this,t);l(e,1);var n=r(i),o=0;while(o<s.length)if(s[o++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},2062:function(t,e,i){var s=i(9781),n=i(1702),r=i(7045),l=URLSearchParams.prototype,o=n(l.forEach);s&&!("size"in l)&&r(l,"size",{get:function(){var t=0;return o(this,(function(){t++})),t},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=53.2983b28d.js.map