"use strict";(self["webpackChunkntpu_dorm_check_in"]=self["webpackChunkntpu_dorm_check_in"]||[]).push([[264],{9264:function(t,n,e){e.r(n),e.d(n,{default:function(){return g}});var i=function(){var t=this,n=t._self._c;return n("div",{staticClass:"hello"},[n("button",{on:{click:t.loginWithGoogle}},[t._v("使用Google登錄")]),n("el-row",[n("el-button",{attrs:{type:"primary",icon:"fas fa-edit",disabled:!t.isInit},on:{click:t.handleClickLogin}},[t._v("get authCode")]),t.isSignIn?t._e():n("el-button",{attrs:{type:"primary",icon:"fas fa-edit",disabled:!t.isInit},on:{click:t.handleClickSignIn}},[t._v("sign in")]),t.isSignIn?n("el-button",{attrs:{type:"primary",icon:"fas fa-edit",disabled:!t.isInit},on:{click:t.handleClickSignOut}},[t._v("sign out")]):t._e(),n("el-button",{attrs:{type:"primary",icon:"fas fa-edit",disabled:!t.isInit},on:{click:t.handleClickDisconnect}},[t._v("disconnect")]),n("i",{staticClass:"fas fa-edit"}),n("p",[t._v("isInit: "+t._s(t.isInit))]),n("p",[t._v("isSignIn: "+t._s(t.isSignIn))]),n("el-button",{attrs:{type:"primary",icon:"fas fa-edit",disabled:!t.isInit},on:{click:t.handleClickUpdateScope}},[t._v("update scope")])],1)],1)},o=[],s={name:"HelloWorld",props:{msg:String},data(){return{isInit:!1,isSignIn:!1}},methods:{async handleClickUpdateScope(){const t=new window.gapi.auth2.SigninOptionsBuilder;t.setScope("email https://www.googleapis.com/auth/drive.file");const n=this.$gAuth.GoogleAuth.currentUser.get();try{await n.grant(t),console.log("success")}catch(e){console.error(e)}},handleClickLogin(){this.$gAuth.getAuthCode().then((t=>{console.log("authCode",t)})).catch((t=>{}))},async handleClickSignIn(){try{const t=await this.$gAuth.signIn();if(!t)return null;console.log("googleUser",t),console.log("getId",t.getId()),console.log("getBasicProfile",t.getBasicProfile()),console.log("getAuthResponse",t.getAuthResponse()),console.log("getAuthResponse",this.$gAuth.GoogleAuth.currentUser.get().getAuthResponse()),this.isSignIn=this.$gAuth.isAuthorized}catch(t){return console.error(t),null}},async handleClickSignOut(){try{await this.$gAuth.signOut(),this.isSignIn=this.$gAuth.isAuthorized,console.log("isSignIn",this.$gAuth.isAuthorized)}catch(t){console.error(t)}},handleClickDisconnect(){window.location.href=`https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=${window.location.href}`},loginWithGoogle(){gapi.load("auth2",(()=>{gapi.auth2.getAuthInstance({client_id:"54064734422-1nk5g1ag3n29qbqpero42krrtpdkugmd.apps.googleusercontent.com"}).then((t=>{t.signIn().then((t=>{t.getAuthResponse().id_token})).catch((t=>{console.error("Google登錄失敗:",t)}))}))}))}},created(){let t=this,n=setInterval((function(){t.isInit=t.$gAuth.isInit,t.isSignIn=t.$gAuth.isAuthorized,t.isInit&&clearInterval(n)}),1e3)}},l=s,c=e(1001),a=(0,c.Z)(l,i,o,!1,null,"3bce96b0",null),g=a.exports}}]);
//# sourceMappingURL=264.9a6accff.js.map